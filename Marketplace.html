<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alters Marketplace - AI Digital Twins</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: { primary: "#ff8a2b", secondary: "#1a1a1a" },
            borderRadius: {
              none: "0px",
              sm: "4px",
              DEFAULT: "8px",
              md: "12px",
              lg: "16px",
              xl: "20px",
              "2xl": "24px",
              "3xl": "32px",
              full: "9999px",
              button: "8px",
            },
          },
        },
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
    />
    <script src="navbar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <style>
      :where([class^="ri-"])::before {
        content: "\f3c2";
      }
      body {
        font-family: "Inter", sans-serif;
        background-color: #0a0a0a;
        color: #ffffff;
      }
      .gradient-text {
        background: linear-gradient(90deg, #ff8a2b, #ff6b2b);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      .hero-bg {
        background: radial-gradient(
            circle at 70% 30%,
            rgba(255, 138, 43, 0.15),
            transparent 60%
          ),
          radial-gradient(
            circle at 30% 70%,
            rgba(255, 138, 43, 0.1),
            transparent 50%
          );
      }
      .floating {
        animation: float 6s ease-in-out infinite;
      }
      @keyframes float {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
        100% {
          transform: translateY(0px);
        }
      }
      .particle {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 138, 43, 0.3);
        pointer-events: none;
      }
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 30px -15px rgba(255, 138, 43, 0.2);
      }
      .product-card {
        transition: all 0.3s ease;
      }
      .product-card:hover {
        transform: translateY(-10px);
      }
      .product-card:hover .quick-view {
        opacity: 1;
      }
      .quick-view {
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .product-card:hover .add-to-cart {
        transform: translateY(0);
        opacity: 1;
      }
      .add-to-cart {
        transform: translateY(20px);
        opacity: 0;
        transition: all 0.3s ease;
      }
      .custom-checkbox {
        position: relative;
        padding-left: 28px;
        cursor: pointer;
        user-select: none;
      }
      .custom-checkbox input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
      }
      .checkmark {
        position: absolute;
        top: 0;
        left: 0;
        height: 20px;
        width: 20px;
        background-color: transparent;
        border: 2px solid #666;
        border-radius: 4px;
      }
      .custom-checkbox:hover input ~ .checkmark {
        border-color: #999;
      }
      .custom-checkbox input:checked ~ .checkmark {
        background-color: #ff8a2b;
        border-color: #ff8a2b;
      }
      .checkmark:after {
        content: "";
        position: absolute;
        display: none;
      }
      .custom-checkbox input:checked ~ .checkmark:after {
        display: block;
      }
      .custom-checkbox .checkmark:after {
        left: 6px;
        top: 2px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
      }
      .custom-select {
        position: relative;
        display: inline-block;
        width: 100%;
      }
      .custom-select-selected {
        background-color: #222;
        color: white;
        padding: 8px 16px;
        border-radius: 8px;
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .custom-select-options {
        position: absolute;
        background-color: #222;
        min-width: 100%;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        z-index: 50;
        border-radius: 8px;
        margin-top: 4px;
        max-height: 300px;
        overflow-y: auto;
        display: none;
      }
      .custom-select-option {
        color: white;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        cursor: pointer;
      }
      .custom-select-option:hover {
        background-color: #333;
      }
      .custom-select-show {
        display: block;
      }
      .custom-switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
      }
      .custom-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #333;
        transition: 0.4s;
        border-radius: 24px;
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }
      input:checked + .slider {
        background-color: #ff8a2b;
      }
      input:checked + .slider:before {
        transform: translateX(26px);
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in forwards;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .delete-alter-btn {
        transition: all 0.3s ease;
      }
      .delete-alter-btn:hover {
        background-color: rgba(255, 0, 0, 0.9) !important;
      }
    </style>
    <script src="/navbar.js" defer></script>
  </head>

  <body>
    <!-- Navigation -->
    <div id="navbar"></div>
    <!-- Hero Section -->
    <section class="hero-bg pt-28 pb-16 px-6 md:px-12 relative overflow-hidden">
      <div class="max-w-6xl mx-auto">
        <div class="flex flex-col md:flex-row items-center w-full">
          <div class="md:w-1/2 mb-10 md:mb-0">
            <h1 class="text-4xl md:text-5xl font-bold mb-6">
              Discover & Collect
              <span class="gradient-text">Unique Digital Alters</span>
            </h1>
            <p class="text-xl text-gray-300 mb-8">
              Explore our marketplace of AI-powered digital twins created by
              talented designers around the world. Find the perfect alter for
              your virtual presence.
            </p>
            <div class="flex items-center mt-10 space-x-6">
              <div class="flex -space-x-3">
                <div
                  class="w-10 h-10 rounded-full border-2 border-black overflow-hidden"
                >
                  <img
                    src="https://readdy.ai/api/search-image?query=professional%2520headshot%2520of%2520young%2520diverse%2520woman%2520with%2520neutral%2520expression%2520on%2520dark%2520background%2520high%2520quality%2520portrait&width=100&height=100&seq=2&orientation=squarish"
                    alt="Creator"
                    class="w-full h-full object-cover"
                  />
                </div>
                <div
                  class="w-10 h-10 rounded-full border-2 border-black overflow-hidden"
                >
                  <img
                    src="https://readdy.ai/api/search-image?query=professional%2520headshot%2520of%2520young%2520diverse%2520man%2520with%2520neutral%2520expression%2520on%2520dark%2520background%2520high%2520quality%2520portrait&width=100&height=100&seq=3&orientation=squarish"
                    alt="Creator"
                    class="w-full h-full object-cover"
                  />
                </div>
                <div
                  class="w-10 h-10 rounded-full border-2 border-black overflow-hidden"
                >
                  <img
                    src="https://readdy.ai/api/search-image?query=professional%2520headshot%2520of%2520young%2520asian%2520woman%2520with%2520neutral%2520expression%2520on%2520dark%2520background%2520high%2520quality%2520portrait&width=100&height=100&seq=4&orientation=squarish"
                    alt="Creator"
                    class="w-full h-full object-cover"
                  />
                </div>
                <div
                  class="w-10 h-10 rounded-full border-2 border-black bg-primary flex items-center justify-center text-xs font-bold"
                >
                  +5K
                </div>
              </div>
              <div>
                <p class="text-sm text-gray-400">Trusted by 5,000+ creators</p>
                <div class="flex items-center">
                  <div class="flex text-yellow-400">
                    <i class="ri-star-fill"></i>
                    <i class="ri-star-fill"></i>
                    <i class="ri-star-fill"></i>
                    <i class="ri-star-fill"></i>
                    <i class="ri-star-half-fill"></i>
                  </div>
                  <span class="ml-2 text-sm">4.8/5</span>
                </div>
              </div>
            </div>
          </div>
          <div class="md:w-1/2 relative">
            <div class="relative z-10 floating">
              <img
                src="https://readdy.ai/api/search-image?query=futuristic%2520digital%2520avatar%2520marketplace%2520with%2520multiple%2520realistic%2520human%2520digital%2520twins%2520displayed%2520in%2520holographic%2520interfaces%252C%2520high-tech%2520virtual%2520reality%2520environment%252C%2520glowing%2520orange%2520and%2520blue%2520UI%2520elements%252C%2520dark%2520background%2520with%2520neon%2520accents%252C%2520clean%2520minimal%2520design&width=600&height=500&seq=5&orientation=landscape"
                alt="Digital Alters Marketplace"
                class="rounded-xl"
              />
            </div>
            <div
              class="absolute -bottom-6 -left-6 w-32 h-32 bg-primary bg-opacity-10 rounded-full blur-xl"
            ></div>
            <div
              class="absolute -top-6 -right-6 w-32 h-32 bg-primary bg-opacity-10 rounded-full blur-xl"
            ></div>
          </div>
        </div>
      </div>
      <div
        id="particles-container"
        class="absolute inset-0 pointer-events-none"
      ></div>
    </section>
    <!-- Category Navigation -->
    <section class="py-10 px-6 md:px-12 bg-black">
        <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
          <a
            href="#"
            class="bg-secondary bg-opacity-50 rounded-lg p-4 text-center hover:bg-opacity-70 transition-all"
          >
            <div
              class="w-12 h-12 bg-primary bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3"
            >
              <i class="ri-user-3-line text-primary text-xl"></i>
            </div>
            <span>Professionals</span>
          </a>
          <a
            href="#"
            class="bg-secondary bg-opacity-50 rounded-lg p-4 text-center hover:bg-opacity-70 transition-all"
          >
            <div
              class="w-12 h-12 bg-primary bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3"
            >
              <i class="ri-game-line text-primary text-xl"></i>
            </div>
            <span>Gaming</span>
          </a>
          <a
            href="#"
            class="bg-secondary bg-opacity-50 rounded-lg p-4 text-center hover:bg-opacity-70 transition-all"
          >
            <div
              class="w-12 h-12 bg-primary bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3"
            >
              <i class="ri-movie-line text-primary text-xl"></i>
            </div>
            <span>Entertainment</span>
          </a>
          <a
            href="#"
            class="bg-secondary bg-opacity-50 rounded-lg p-4 text-center hover:bg-opacity-70 transition-all"
          >
            <div
              class="w-12 h-12 bg-primary bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3"
            >
              <i class="ri-customer-service-line text-primary text-xl"></i>
            </div>
            <span>Service</span>
          </a>
          <a
            href="#"
            class="bg-secondary bg-opacity-50 rounded-lg p-4 text-center hover:bg-opacity-70 transition-all"
          >
            <div
              class="w-12 h-12 bg-primary bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3"
            >
              <i class="ri-education-line text-primary text-xl"></i>
            </div>
            <span>Education</span>
          </a>
          <a
            href="#"
            class="bg-secondary bg-opacity-50 rounded-lg p-4 text-center hover:bg-opacity-70 transition-all"
          >
            <div
              class="w-12 h-12 bg-primary bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3"
            >
              <i class="ri-more-line text-primary text-xl"></i>
            </div>
            <span>More</span>
          </a>
        </div>
      </div>
    </section>
    <!-- Main Content -->
    <section class="py-10 px-6 md:px-12 bg-black">
      <div class="max-w-6xl mx-auto">
        <div class="flex flex-col gap-8">
          <!-- Products Grid -->
          <div class="w-full">
            <!-- Sorting Options -->
            <div
              class="flex flex-col md:flex-row items-start md:items-center justify-between mb-8 bg-secondary bg-opacity-30 rounded-lg p-4"
            >
              <div class="mb-4 md:mb-0">
                <h3 class="text-xl font-bold">Professional Alters</h3>
              </div>
            </div>
            <!-- Products Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
              <!-- Product Card 1 -->
              <div
                class="bg-secondary bg-opacity-30 rounded-lg overflow-hidden product-card"
              >
                <div class="relative">
                  <img
                    src="https://readdy.ai/api/search-image?query=professional%2520looking%2520digital%2520avatar%2520of%2520business%2520woman%2520with%2520suit%2520on%2520dark%2520background%2520high%2520quality%2520realistic%25203D%2520render%2520with%2520perfect%2520lighting%2520and%2520textures&width=400&height=400&seq=10&orientation=squarish"
                    alt="Professional Alter"
                    class="w-full h-64 object-cover"
                  />
                  <div class="absolute top-3 right-3 flex space-x-2">
                    <div
                      class="w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center backdrop-blur-sm"
                    >
                    </div>
                    <div
                      class="w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center backdrop-blur-sm"
                    >
                      <i class="ri-share-line text-white"></i>
                    </div>
                  </div>
                  <div class="absolute bottom-3 left-3">
                    <div
                      class="bg-primary text-white text-xs px-3 py-1 rounded-full"
                    >
                      Professional
                    </div>
                  </div>
                  <div
                    class="absolute inset-0 flex items-center justify-center quick-view"
                  >
                  </div>
                </div>

                <div class="p-4">
                  <div class="flex items-center justify-between mb-2">
                    <h3 class="font-bold"><a href="/markeplace/doctor-alter.html" class="hover:text-primary transition-colors">Doctor Emma</a></h3>
                    <div class="flex text-yellow-400 text-sm">
                      <i class="ri-star-fill"></i>
                      <span class="ml-1">4.9</span>
                    </div>
                  </div>
                  <div class="flex items-center mb-4">
                    <div class="w-6 h-6 rounded-full overflow-hidden mr-2">
                      <img
                        src="https://readdy.ai/api/search-image?query=professional%2520headshot%2520of%2520young%2520woman%2520with%2520neutral%2520expression%2520on%2520dark%2520background%2520high%2520quality%2520portrait&width=100&height=100&seq=11&orientation=squarish"
                        alt="Creator"
                        class="w-full h-full object-cover"
                      />
                    </div>
                    <span class="text-sm text-gray-400"
                      >by <span class="text-primary">AlterStudio</span></span
                    >
                    <div
                      class="ml-2 w-4 h-4 bg-primary bg-opacity-20 rounded-full flex items-center justify-center"
                    >
                   <i class="ri-check-line text-primary text-xs"></i>
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                    <div>
                      <div class="text-xl font-bold">$9.99</div>
                    </div>
                    <button
                      class="add-to-cart bg-primary text-white w-10 h-10 rounded-full flex items-center justify-center"
                    >
                      <i class="ri-mic-line"></i>
                    </button>
                  </div>
                </div>
              </div>
              <!-- Product Card 2 -->
              <div
                class="bg-secondary bg-opacity-30 rounded-lg overflow-hidden product-card"
              >
                <div class="relative">
                  <img
                    src="https://readdy.ai/api/search-image?query=professional%2520looking%2520digital%2520avatar%2520of%2520business%2520man%2520with%2520suit%2520on%2520dark%2520background%2520high%2520quality%2520realistic%25203D%2520render%2520with%2520perfect%2520lighting%2520and%2520textures&width=400&height=400&seq=12&orientation=squarish"
                    alt="Professional Alter"
                    class="w-full h-64 object-cover"
                  />
                  <div class="absolute top-3 right-3 flex space-x-2">
                    <div
                      class="w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center backdrop-blur-sm"
                    >
                    </div>
                    <div
                      class="w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center backdrop-blur-sm"
                    >
                      <i class="ri-share-line text-white"></i>
                    </div>
                  </div>
                  <div class="absolute bottom-3 left-3">
                    <div
                      class="bg-primary text-white text-xs px-3 py-1 rounded-full"
                    >
                      Professional
                    </div>
                  </div>
                  <div
                    class="absolute inset-0 flex items-center justify-center quick-view"
                  >
                  </div>
                </div>
                <div class="p-4">
                  <div class="flex items-center justify-between mb-2">
                    <h3 class="font-bold"><a href="/markeplace/bussiness-alter.html" class="hover:text-primary transition-colors">Bussiness Man</a></h3>
                    <div class="flex text-yellow-400 text-sm">
                      <i class="ri-star-fill"></i>
                      <span class="ml-1">4.8</span>
                    </div>
                  </div>
                  <div class="flex items-center mb-4">
                    <div class="w-6 h-6 rounded-full overflow-hidden mr-2">
                      <img
                        src="https://readdy.ai/api/search-image?query=professional%2520headshot%2520of%2520young%2520man%2520with%2520neutral%2520expression%2520on%2520dark%2520background%2520high%2520quality%2520portrait&width=100&height=100&seq=13&orientation=squarish"
                        alt="Creator"
                        class="w-full h-full object-cover"
                      />
                    </div>
                    <span class="text-sm text-gray-400"
                      >by <span class="text-primary">DigitalTwins</span></span
                    >
                    <div
                      class="ml-2 w-4 h-4 bg-primary bg-opacity-20 rounded-full flex items-center justify-center"
                    >
                      <i class="ri-check-line text-primary text-xs"></i>
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                    <div>
                      <div class="text-xl font-bold">$9.99</div>
                    </div>
                    <button
                      class="add-to-cart bg-primary text-white w-10 h-10 rounded-full flex items-center justify-center"
                    >
                      <i class="ri-mic-line"></i>
                    </button>
                  </div>
                </div>
              </div>
              <!-- Product Card 3 -->
              <div
                class="bg-secondary bg-opacity-30 rounded-lg overflow-hidden product-card"
              >
                <div class="relative">
                  <img
                    src="https://readdy.ai/api/search-image?query=professional%2520looking%2520digital%2520avatar%2520of%2520tech%2520specialist%2520woman%2520on%2520dark%2520background%2520high%2520quality%2520realistic%25203D%2520render%2520with%2520perfect%2520lighting%2520and%2520textures&width=400&height=400&seq=14&orientation=squarish"
                    alt="Professional Alter"
                    class="w-full h-64 object-cover"
                  />
                  <div class="absolute top-3 right-3 flex space-x-2">
                    <div
                      class="w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center backdrop-blur-sm"
                    >
                    </div>
                    <div
                      class="w-8 h-8 bg-black bg-opacity-50 rounded-full flex items-center justify-center backdrop-blur-sm"
                    >
                      <i class="ri-share-line text-white"></i>
                    </div>
                  </div>
                  <div class="absolute bottom-3 left-3">
                    <div
                      class="bg-primary text-white text-xs px-3 py-1 rounded-full"
                    >
                      Professional
                    </div>
                  </div>
                  <div
                    class="absolute inset-0 flex items-center justify-center quick-view"
                  >
                  </div>
                </div>
                <div class="p-4">
                  <div class="flex items-center justify-between mb-2">
                  <h3 class="font-bold"><a href="/markeplace/GymGuide-alter.html" class="hover:text-primary transition-colors">Gym Guide</a></h3>

                    <div class="flex text-yellow-400 text-sm">
                      <i class="ri-star-fill"></i>
                      <span class="ml-1">4.7</span>
                    </div>
                  </div>
                  <div class="flex items-center mb-4">
                    <div class="w-6 h-6 rounded-full overflow-hidden mr-2">
                      <img
                        src="https://readdy.ai/api/search-image?query=professional%2520headshot%2520of%2520young%2520asian%2520woman%2520with%2520neutral%2520expression%2520on%2520dark%2520background%2520high%2520quality%2520portrait&width=100&height=100&seq=15&orientation=squarish"
                        alt="Creator"
                        class="w-full h-full object-cover"
                      />
                    </div>
                    <span class="text-sm text-gray-400"
                      >by <span class="text-primary">TechAlters</span></span
                    >
                    <div
                      class="ml-2 w-4 h-4 bg-primary bg-opacity-20 rounded-full flex items-center justify-center"
                    >
                      <i class="ri-check-line text-primary text-xs"></i>
                    </div>
                  </div>
                  <div class="flex items-center justify-between">
                    <div>
                      <div class="text-xl font-bold">$9.99</div>
                    </div>
                    <button
                      class="add-to-cart bg-primary text-white w-10 h-10 rounded-full flex items-center justify-center"
                    >
                      <i class="ri-mic-line"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Community Alters Section -->
          <div class="w-full mt-12">
            <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-8 bg-secondary bg-opacity-30 rounded-lg p-4">
              <div class="mb-4 md:mb-0">
                <h3 class="text-xl font-bold">Community Alters</h3>
                <p class="text-gray-400">Created by our community members</p>
              </div>
            </div>
            
            <!-- User Alters Grid - Will be populated dynamically -->
            <div id="user-alters-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
              <!-- User alter cards will be inserted here -->
              <div class="col-span-full text-center py-8">
                <i class="ri-loader-4-line text-2xl animate-spin"></i>
                <p class="mt-2">Loading community alters...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script type="module">
      import { fetchUserAlters, deleteUserAlter } from './marketplace-integration.js';
      import { getCurrentUser } from './auth-sync.js';
      
      document.addEventListener('DOMContentLoaded', async () => {
        // Create particles for background effect
        createParticles();
        
        // Fetch and display user alters
        await loadUserAlters();
      });
      
      // Create floating particles
      function createParticles() {
        const particlesContainer = document.getElementById('particles-container');
        const particleCount = 30;
        
        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.classList.add('particle');
          
          // Random size between 2px and 6px
          const size = Math.random() * 4 + 2;
          particle.style.width = `${size}px`;
          particle.style.height = `${size}px`;
          
          // Random position
          particle.style.left = `${Math.random() * 100}%`;
          particle.style.top = `${Math.random() * 100}%`;
          
          // Random opacity
          particle.style.opacity = Math.random() * 0.5 + 0.1;
          
          // Animation duration and delay
          const duration = Math.random() * 20 + 10;
          const delay = Math.random() * 5;
          particle.style.animation = `float ${duration}s ease-in-out ${delay}s infinite`;
          
          particlesContainer.appendChild(particle);
        }
      }
      
      // Fetch and display user alters
      async function loadUserAlters() {
        // Get user alters grid
        const userAltersGrid = document.getElementById('user-alters-grid');
        
        // Fetch user alters
        const { success, alters, error } = await fetchUserAlters();
        
        // Get current user for delete button visibility
        const user = await getCurrentUser();
        const currentUserId = user?.supabaseUserId;
        
        if (success && alters && alters.length > 0) {
          // Clear loading state
          userAltersGrid.innerHTML = '';
          
          // Display each alter
          alters.forEach(alter => {
            const card = document.createElement('div');
            card.className = 'bg-secondary bg-opacity-30 rounded-lg overflow-hidden product-card';
            card.innerHTML = `
              <div class="relative">
                <img src="${alter.avatar_url || '/placeholder.svg'}" alt="${alter.name}" class="w-full h-64 object-cover">
                <div class="absolute top-3 right-3 flex space-x-2">
                  ${currentUserId === alter.user_id ? `
                    <button class="delete-alter-btn w-8 h-8 bg-red-500 bg-opacity-70 rounded-full flex items-center justify-center backdrop-blur-sm" data-alter-id="${alter.id}">
                      <i class="ri-delete-bin-line text-white"></i>
                    </button>
                  ` : ''}
                </div>
                <div class="absolute bottom-3 left-3">
                  <div class="bg-primary text-white text-xs px-3 py-1 rounded-full">
                    ${alter.category}
                  </div>
                </div>
              </div>
              <div class="p-4">
                <h3 class="text-lg font-semibold mb-2">${alter.name}</h3>
                <p class="text-gray-400 text-sm mb-3">${alter.description}</p>
                <div class="flex justify-between items-center">
                  <span class="text-xs text-gray-500">By ${alter.creator_name || 'Anonymous'}</span>
                </div>
                <a href="/markeplace/${alter.id}.html" class="mt-4 block w-full bg-primary text-white text-center py-2 rounded-lg hover:bg-opacity-90 transition-all">
                  View Alter
                </a>
              </div>
            `;
            
            userAltersGrid.appendChild(card);
          });
          
          // Add event listeners to delete buttons
          document.querySelectorAll('.delete-alter-btn').forEach(button => {
            button.addEventListener('click', async (e) => {
              e.preventDefault();
              
              if (confirm('Are you sure you want to delete this alter?')) {
                const alterId = button.getAttribute('data-alter-id');
                const result = await deleteUserAlter(alterId);
                
                if (result.success) {
                  // Remove card from grid
                  button.closest('.product-card').remove();
                  alert('Alter deleted successfully');
                  
                  // If no more alters, show empty state
                  if (userAltersGrid.children.length === 0) {
                    userAltersGrid.innerHTML = '<div class="col-span-full text-center py-8"><p>No community alters found. Be the first to publish one!</p></div>';
                  }
                } else {
                  alert(`Failed to delete alter: ${result.error}`);
                }
              }
            });
          });
        } else if (success && (!alters || alters.length === 0)) {
          userAltersGrid.innerHTML = '<div class="col-span-full text-center py-8"><p>No community alters found. Be the first to publish one!</p></div>';
        } else {
          userAltersGrid.innerHTML = `<div class="col-span-full text-center py-8"><p>Failed to load community alters: ${error}</p></div>`;
        }
      }
    </script>
  </body>
</html>
